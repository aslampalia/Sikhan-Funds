<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Sikhan Funds</title>
<style>
body {
background-color: #000;
color: #fff;
font-family: Arial, sans-serif;
padding: 20px;
}

h1 {
color: #00ffcc;
text-align: center;
}

form {
margin-bottom: 20px;
display: grid;
gap: 10px;
max-width: 600px;
margin-left: auto;
margin-right: auto;
}

input, textarea, button {
padding: 10px;
border-radius: 5px;
border: none;
font-size: 1em;
}

input, textarea {
background-color: #1a1a1a;
color: white;
}

button {
background-color: #00ffcc;
color: black;
cursor: pointer;
font-weight: bold;
}

button:hover {
background-color: #00ccaa;
}

#responseMessage {
text-align: center;
font-weight: bold;
margin-top: 10px;
}

table {
width: 100%;
border-collapse: collapse;
margin-top: 40px;
}

th, td {
border: 1px solid #333;
padding: 10px;
text-align: center;
}

th {
background-color: #111;
}

tr:nth-child(even) {
background-color: #1a1a1a;
}
</style>
</head>
<body>

<h1>Sikhan Funds</h1>

<form id="tradeForm">
<input type="text" id="ticker" placeholder="Ticker" required />
<input type="date" id="entryDate" required />
<input type="date" id="expiryDate" required />
<input type="number" id="entryPrice" placeholder="Entry Price" step="0.01" required />
<input type="number" id="profitTarget" placeholder="Profit Target" step="0.01" required />
<input type="number" id="stopLossPrice" placeholder="Stop Loss Price" step="0.01" required />
<textarea id="notes" placeholder="Notes (optional)"></textarea>
<button type="submit">Add Trade</button>
</form>

<p id="responseMessage"></p>

<table>
<thead>
<tr>
<th>Ticker</th>
<th>Entry Date</th>
<th>Expiry Date</th>
<th>Entry Price</th>
<th>Profit Target</th>
<th>Stop Loss Price</th>
<th>Notes</th>
</tr>
</thead>
<tbody id="tradeTableBody">
<!-- Trade rows will appear here -->
</tbody>
</table>

<script>
const form = document.getElementById('tradeForm');
const tableBody = document.getElementById('tradeTableBody');
const responseMessage = document.getElementById('responseMessage');

form.addEventListener('submit', function(event) {
event.preventDefault();

const ticker = document.getElementById('ticker').value.toUpperCase();
const entryDate = document.getElementById('entryDate').value;
const expiryDate = document.getElementById('expiryDate').value;
const entryPrice = parseFloat(document.getElementById('entryPrice').value);
const profitTarget = parseFloat(document.getElementById('profitTarget').value);
const stopLossPrice = parseFloat(document.getElementById('stopLossPrice').value);
const notes = document.getElementById('notes').value;

const profitTargetPct = ((profitTarget - entryPrice) / entryPrice * 100).toFixed(2);
const stopLossPct = ((stopLossPrice - entryPrice) / entryPrice * 100).toFixed(2);

const row = document.createElement('tr');
row.innerHTML = `
<td>${ticker}</td>
<td>${entryDate}</td>
<td>${expiryDate}</td>
<td>${entryPrice.toFixed(2)}</td>
<td>${profitTarget.toFixed(2)} (${profitTargetPct}%)</td>
<td>${stopLossPrice.toFixed(2)} (${stopLossPct}%)</td>
<td>${notes.replace(/</g, "&lt;").replace(/>/g, "&gt;")}</td>
`;
tableBody.appendChild(row);

// ✅ Send to Google Sheets
fetch('https://script.google.com/macros/s/AKfycbx5YW15PQkTVKIBB5SWNd159Dn4pUlN_59chIyLifPp6D_EIqtWvGF2XiDDmPevhhEV/exec', {
method: 'POST',
headers: { 'Content-Type': 'application/json' },
body: JSON.stringify({
ticker,
entryDate,
expiryDate,
entryPrice,
profitTarget,
stopLossPrice,
notes
})
})
.then(response => response.json())
.then(data => {
if (data.result === 'success') {
responseMessage.textContent = '✅ Trade successfully saved!';
responseMessage.style.color = '#00ffcc';
} else {
responseMessage.textContent = '❌ Error saving trade: ' + data.error;
responseMessage.style.color = 'red';
}
})
.catch(error => {
console.error('❌ Fetch Error:', error);
responseMessage.textContent = '❌ Could not send data to Google Sheets.';
responseMessage.style.color = 'red';
});

form.reset();
});
</script>

</body>
</html>
